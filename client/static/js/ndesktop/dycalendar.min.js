/*!
 * dyCalendar is a JavaScript library for creating Calendar.
 *
 * Author: Yusuf Shakeel
 * https://github.com/yusufshakeel
 *
 * GitHub Link: https://github.com/yusufshakeel/dyCalendarJS
 *
 * MIT license
 * Copyright (c) 2016 Yusuf Shakeel
 *
 * Date: 2014-08-17 sunday
 */
/*! dyCalendarJS | (c) 2016 Yusuf Shakeel | https://github.com/yusufshakeel/dyCalendarJS */
!function(global){"use strict";var dycalendar={},document=global.document,START_YEAR=1900,END_YEAR=9999,monthName={full:["January","February","March","April","May","June","July","August","September","October","November","December"],mmm:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},dayName={full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d:["S","M","T","W","T","F","S"],dd:["Su","Mo","Tu","We","Th","Fr","Sa"],ddd:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]};function createMonthTable(data,option){var table,tr,td,r,c,count;for((table=document.createElement("table")).setAttribute("class","dycalendar-day-container"),tr=document.createElement("tr"),c=0;c<=6;c+=1)(td=document.createElement("td")).innerHTML=dayName.dd[c],tr.appendChild(td);for(table.appendChild(tr),tr=document.createElement("tr"),c=0;c<=6&&c!==data.firstDayIndex;c+=1)td=document.createElement("td"),tr.appendChild(td);for(count=1;c<=6;)(td=document.createElement("td")).innerHTML=count,option.date===count&&option.month===data.monthIndex&&!0===option.highlighttargetdate&&td.setAttribute("class","dycalendar-target-date"),data.today.date===count&&data.today.monthIndex===data.monthIndex&&!0===option.highlighttoday&&td.setAttribute("class","dycalendar-today-date"),tr.appendChild(td),count+=1,c+=1;for(table.appendChild(tr),r=3;r<=7;r+=1){for(tr=document.createElement("tr"),c=0;c<=6;c+=1){if(count>data.totaldays)return table.appendChild(tr),table;(td=document.createElement("td")).innerHTML=count,option.date===count&&option.month===data.monthIndex&&!0===option.highlighttargetdate&&td.setAttribute("class","dycalendar-target-date"),data.today.date===count&&data.today.monthIndex===data.monthIndex&&!0===option.highlighttoday&&td.setAttribute("class","dycalendar-today-date"),count+=1,tr.appendChild(td)}table.appendChild(tr)}return table}function drawCalendarMonthTable(data,option){var table,div,container,elem;return table=createMonthTable(data,option),(container=document.createElement("div")).setAttribute("class","dycalendar-month-container"),(div=document.createElement("div")).setAttribute("class","dycalendar-header"),div.setAttribute("data-option",JSON.stringify(option)),(elem=document.createElement("span")).setAttribute("class","dycalendar-span-month-year"),"mmm"===option.monthformat?elem.innerHTML=data.monthName+" "+data.year:"full"===option.monthformat&&(elem.innerHTML=data.monthNameFull+" "+data.year),div.appendChild(elem),"show"===option.prevnextbutton&&((elem=document.createElement("span")).setAttribute("class","dycalendar-prev-next-btn prev-btn"),elem.setAttribute("data-date",option.date),elem.setAttribute("data-month",option.month),elem.setAttribute("data-year",option.year),elem.setAttribute("data-action","CALNPREV"),elem.setAttribute("data-btn","prev"),elem.innerHTML="&#x25B2;",div.appendChild(elem),(elem=document.createElement("span")).setAttribute("class","dycalendar-prev-next-btn next-btn"),elem.setAttribute("data-date",option.date),elem.setAttribute("data-month",option.month),elem.setAttribute("data-year",option.year),elem.setAttribute("data-action","CALNNEXT"),elem.setAttribute("data-btn","next"),elem.innerHTML="&#x25BC;",div.appendChild(elem)),container.appendChild(div),(div=document.createElement("div")).setAttribute("class","dycalendar-body"),div.appendChild(table),container.appendChild(div),container}function drawCalendarDay(data,option){var div,container,elem;return(container=document.createElement("div")).setAttribute("class","dycalendar-day-container"),(div=document.createElement("div")).setAttribute("class","dycalendar-header"),(elem=document.createElement("span")).setAttribute("class","dycalendar-span-day"),"ddd"===option.dayformat?elem.innerHTML=dayName.ddd[data.targetedDayIndex]:"full"===option.dayformat&&(elem.innerHTML=dayName.full[data.targetedDayIndex]),div.appendChild(elem),container.appendChild(div),(div=document.createElement("div")).setAttribute("class","dycalendar-body"),(elem=document.createElement("span")).setAttribute("class","dycalendar-span-date"),elem.innerHTML=data.date,div.appendChild(elem),container.appendChild(div),(div=document.createElement("div")).setAttribute("class","dycalendar-footer"),container.appendChild(div),container}function extendSource(source,defaults){var property;for(property in defaults)!1===source.hasOwnProperty(property)&&(source[property]=defaults[property]);return source}function getCalendar(year,month,date){var dateObj=new Date,dateString,result={},idx;return year<1900||year>9999?(global.console.error("Invalid Year"),!1):month>11||month<0?(global.console.error("Invalid Month"),!1):date>31||date<1?(global.console.error("Invalid Date"),!1):(result.year=year,result.month=month,result.date=date,result.today={},dateString=dateObj.toString().split(" "),idx=dayName.ddd.indexOf(dateString[0]),result.today.dayIndex=idx,result.today.dayName=dateString[0],result.today.dayFullName=dayName.full[idx],idx=monthName.mmm.indexOf(dateString[1]),result.today.monthIndex=idx,result.today.monthName=dateString[1],result.today.monthNameFull=monthName.full[idx],result.today.date=dateObj.getDate(),result.today.year=dateString[3],dateObj.setDate(1),dateObj.setMonth(month),dateObj.setFullYear(year),dateString=dateObj.toString().split(" "),idx=dayName.ddd.indexOf(dateString[0]),result.firstDayIndex=idx,result.firstDayName=dateString[0],result.firstDayFullName=dayName.full[idx],idx=monthName.mmm.indexOf(dateString[1]),result.monthIndex=idx,result.monthName=dateString[1],result.monthNameFull=monthName.full[idx],dateObj.setFullYear(year),dateObj.setMonth(month+1),dateObj.setDate(0),result.totaldays=dateObj.getDate(),dateObj.setFullYear(year),dateObj.setMonth(month),dateObj.setDate(date),dateString=dateObj.toString().split(" "),idx=dayName.ddd.indexOf(dateString[0]),result.targetedDayIndex=idx,result.targetedDayName=dateString[0],result.targetedDayFullName=dayName.full[idx],result)}function onClick(){document.body.onclick=function(e){var targetDomObject=(e=global.event||e).target||e.srcElement,date,month,year,btn,option,dateObj;targetDomObject&&targetDomObject.classList&&targetDomObject.classList.contains("dycalendar-prev-next-btn")&&(date=parseInt(targetDomObject.getAttribute("data-date")),month=parseInt(targetDomObject.getAttribute("data-month")),year=parseInt(targetDomObject.getAttribute("data-year")),"prev"===(btn=targetDomObject.getAttribute("data-btn"))?(month-=1)<0&&(year-=1,month=11):"next"===btn&&(month+=1)>11&&(year+=1,month=0),(option=JSON.parse(targetDomObject.parentElement.getAttribute("data-option"))).date=date,option.month=month,option.year=year,drawCalendar(option)),targetDomObject&&targetDomObject.classList&&targetDomObject.classList.contains("dycalendar-span-month-year")&&(option=JSON.parse(targetDomObject.parentElement.getAttribute("data-option")),dateObj=new Date,option.date=dateObj.getDate(),option.month=dateObj.getMonth(),option.year=dateObj.getFullYear(),drawCalendar(option))}}function drawCalendar(option){var calendar,calendarHTML,targetedElementBy="id",targetElem,i,len,elemArr;switch("#"===option.target[0]?targetedElementBy="id":"."===option.target[0]&&(targetedElementBy="class"),targetElem=option.target.substring(1),option.type){case"day":calendarHTML=drawCalendarDay(calendar=getCalendar(option.year,option.month,option.date),option);break;case"month":calendarHTML=drawCalendarMonthTable(calendar=getCalendar(option.year,option.month,option.date),option);break;default:return global.console.error("Invalid type"),!1}if("id"===targetedElementBy)document.getElementById(targetElem).innerHTML=calendarHTML.outerHTML;else if("class"===targetedElementBy)for(i=0,len=(elemArr=document.getElementsByClassName(targetElem)).length;i<len;i+=1)elemArr[i].innerHTML=calendarHTML.outerHTML}dycalendar.draw=function(option){if(void 0===option)return global.console.error("Option missing"),!1;var self=this,dateObj=new Date,defaults;drawCalendar(option=extendSource(option,{type:"day",month:dateObj.getMonth(),year:dateObj.getFullYear(),date:dateObj.getDate(),monthformat:"full",dayformat:"full",highlighttoday:!1,highlighttargetdate:!1,prevnextbutton:"hide"}))},onClick(),global.dycalendar=dycalendar}("undefined"!=typeof window?window:this);